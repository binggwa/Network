# 1. 강의 소개
***
### 코스 개요
- 프로토콜 계층에서 제공할 수 있는 서비스의 예
- P2P 프로토콜은 네트워크의 단일 홉에서 발생할 수 있고, 네트워크의 여러 홉에서 end-to-end 프로토콜이 발생할 수 있음
- 안정적인 데이터 전송 서비스를 제공하는 자동 반복 요청인 ARQ 프로토콜에 중점
- 오류가 발생하기 쉬운 채널과 네트워크를 통해 전송할 때 필수적
- 여러 시나리오로 프로토콜의 효율성 검토
- 일반 대역폭 제품이 네트워크 성능에 미치는 영향 이해
- TCP의 신뢰할 수 있는 스트림 서비스는 연결 팩 네트워크 전반에 걸쳐 흐름 제어 끝에서 끝까지 안정적인 스트림 서비스를 제공하는 사례로 간주
- 디지털 비트 스트림 내에서 정보 프레임의 경계를 식별하는 데 사용되는 두가지 기술 소개
- 데이터 링크 계층과 그 필수기능은 제외
- 각 기능은 point-to-point 프로토콜과 고급 데이터 링크 제어 프로토콜
- 통계적 멀티플렉싱 소개
- 다중 액세스 통신과 방송 매체 공유를 위한 중재의 필요성 소개
- 사용자 프레임을 공유 매체에 무작위로 전송하는 미디어 액세스 제어 Mac 프로토콜 고려
- Aloha 프로토콜부터 시작, 캐리어 센스, 충돌 감지 CDMACD 프로토콜을 사용한 다중 액세스에 중점
- 이더넷 LAN의 기반을 형성
- 지연 대역폭 제품이 프로토콜 성능에 큰 영향을 미친다는 것을 보여줌
- 스케쥴링을 사용하여 공유 미디어에 대한 액세스를 조정하는 MAC 프로토콜도 고려
- 이더넷과 무선 LAN을 비롯한 몇 가지 중요한 LAN 표준에 대해 논의
***
# 2. P2P 프로토콜 및 서비스
***
- 통신 프로세스를 여러 계층으로 나눌 수 있으며 각 계층, 둘 이상의 피어 프로세스는 위 계층에 제공되는 서비스를 제공하는 프로토콜을 실행함
- 계층 - (n+1) 프로세스간의 통신은 가상이며, 실제로 계층-n에서 제공하는 계층 서비스를 사용하여 수행됨
- 계층 - (n+1)에서 피어 프로세스로 서비스 데이터 유닛(SDU) 전송을 요청
- 레이어 n에서 SDU는 프로토콜 데이터 유닛(PDU)으로 캡슐화되며 피어 프로세스가 PDU를 교환하여 전송하는 역할
- 레이어 n은 대상 레이어 n+1 피어 프로세스에 SDU를 제공
### 서비스 모델
- 계층 n+1에 제공하는 정보 전송 서비스 계층을 지정
- 연결 지향형과 비연결 방식 간에 차이
- 서비스 모델에는 데이터 전송 시 기대할 수 있는 성능수준을 지정하는 서비스 품질 요구 사항도 포함될 수 있음
- Example
  - 제공하는 데이터 전송 기능에 따라 다름
  - 지정된 계층에서 제공되는 서비스에는
  - 임의 메시지 크기
  - 시퀀스
  - 안정성
  - 타이밍
  - 흐름 제어
  - 멀티플렉싱
  - 개인 정보 보호
  - 무결성
  - 인증
### 메시지 사이즈와 구조
- 다양한 서비스의 경우 전송 메시지가 단일 비트, 바이트 블록 또는 정보 스트림으로 구성될 수 있음
### Segmentation & Blocking
- 최대 메시지 크기를 수용하려면 레이어가 프로토콜에 비해 너무 길거나 너무 짧은 메시지를 처리해야 할 수 있음
- Segmentation은 긴 메시지를 블록의 시퀀스로 나눈 다음 목적지에서 다시 조립하는 것
- Blocking은 전송하기 전에 작은 메시지를 더 큰 블록으로 결합하는 것
### Reliability & Sequencing
- 디지털 전송 기술은 전송 중에 오류를 일으킬 수 있으므로 신뢰성이 중요 문제
- 네트워크에서 메시지가 순서가 맞지 않거나 분실되거나 중복될 수 있기에 시퀀싱이 중요
### Flow Control
- 수신 시스템에 도착 메시지를 저장하기에 충분한 버퍼링이 없는 경우 메시지가 손실될 수 있음
- 대상 계층 n+1 이 정보를 충분히 빠르게 검색하지 못하면 대상 계층 n 버퍼가 오버플로될 수 있음
- 흐름 제어는 목적지의 버퍼 가용성에 따라 전송을 제어하는 배압 메커니즘을 제공
### Timing
- 음성 및 비디오와 관련된 애플리케이션은 시간적으로 관련된 정보 단위를 생성
- 응용 프로그램은 음성 및 비디오 단위로 시간적 관계를 재구성해야 함
- 타이밍 복구 프로토콜은 타임스탬프와 시퀀스번호를 사용하여 전달된 정보의 지연과 지터를 제어함
### Multiplexing
- 멀티플렉싱을 사용하면 여러 계층이 계층 n 서비스를 공유할 수 있음
- TCP와 UDP는 모두 IP를 사용함
### Privacy, Integrity, Authentication
- 개인 정보 보호는 전송된 정보를 다른 사람이 읽을 수 없도록 하는 것
- 무결성이란 전송 중에 정보가 변경되지 않도록 보장하는 것
- 인증은 발신자 및 수신자가 자신이 주장하는 사람인지 확인하는 것
- 보안 프로토콜과 밀접한 관련이 있음
### End-to-End vs Hop-by-Hop
- P2P 프로토콜은 일반적으로 두가지 기본 설정, 즉 네트워크의 단일 홉에서 실행되거나 전체 네트워크에 걸친 종단 간 설정으로 발생함
- 이 두가지 설정으로 인해 메시지가 순서대로 도착했는지 여부, 도착 시간, 도착여부, 오류 감지 수행 방법 등이 달라질 수 있음
### Error control in Data Link Layer
- 데이터 링크 계층 프로토콜은 유선과 같은 직접 연결된 시스템을 통해 홉 바이 홉 방식으로 작동
- 전송에는 단일 링크만 포함되므로 프레임이 도착하는 데 약간의 지연이 발생
- 전송 매체에 노이즈가 있거나 신뢰할 수 없는 경우 프레임이 손상될 수 있지만 다른 곳에 도착해야 함
### Error control in Transport Layer
- 전송 계층 프로토콜 TCP는 end-to-end
- 기본 네트워크가 불안정할 수 있으므로 네트워크를 통해 세그먼트를 전송하고 종단 간 오류 검사 및 재전송을 수행
### Which Approach Preferred
- 상황에 따라 다르다
- hop-by-hop은 오류 복구를 더 빨리 시작하고 더 안정적인 서비스를 제공
  - 각 노드에서 처리하므로 작업이 더 복잡
  - 스위치 내에 오류가 발생하는 데에도 취약
  - 안정적인 서비스의 경우, hop-by-hop과 end-to-end 모두 구현
- 오류가 자주 발생하지 않는 상황에서는 end-to-end 메커니즘 선호
- 오류가 발생할 가능성이 있는 상황에서는 홉별 오류 복구가 필요 ex) HDLC
- 흐름 제어 및 보안 메커니즘의 경우 일반적으로 선택한 접근에 따라 원하는 기능을 제공하는 계층 또는 프로토콜 스택이 결정됨
- 따라서 흐름 제어를 제공하는 메커니즘과 보안을 제공하는 메커니즘은 데이터 링크 계층, 네트워크 계층 및 전송 계층에서 사용가능
***
# 3. 중지 및 대기 ARQ
***
### Automatic Repeat Request (ARQ)
- 컴퓨터 통신에서는 신뢰할 수 있는 정보 전송이 매우 중요함
- 신뢰할 수 있는 데이터 전송 서비스를 제공하는 자동 반복 요청(ARQ)이라는 P2P 프로토콜
- 목적은 일련의 정보 패킷을 순서대로 전달하고 전송 오류 및 손실에도 불구하고 오류나 중복이 발생하지 않도록 하는 것
- 슬라이딩 윈도우를 사용하여 전송 또는 수신이 허용된 프레임에 해당하는 시퀀스 번호 세트를 지정함
- ARQ 프로토콜 3가지
  - Stop-and-Wait ARQ
  - Go-Back N ARQ
  - Selective Repeat ARQ
- ARQ의 기본요소
  - 오류감지
  - ACKs (positive acknowledgments)
  - NAKs (negative acknowledgments)
  - 타임아웃 메커니즘
### Stop-and-Wait ARQ
- 모든 ARQ 프로토콜에는 프레임이 제대로 작동하는 데 필요한 정보를 저장할 수 있는 헤더가 포함되어야 함
- 송신기에는 헤더와 정보 비트를 덮는 CRC 검사 비트가 들어 있어 수신기가 전송 중에 오류가 발생한 위치를 파악할 수 있다
- 정보 프레임 외에도 제어 프레임은 헤더와 CRC로 구성된 셔터 블록
- 제어 프레임은 ACKs 또는 NAKs에 사용
- Stop and Wait에서는 송신기와 수신기가 한번에 한 프레임씩 전송한다
- 프로토콜은 송신기가 수신기에 정보 프레임을 보내는 것으로 시작됨
- 송신기는 중지하고 수신기의 승인을 기다림
- 일정 제한 시간 내에 확인이 수신되지 않으면 송신기는 프레임을 다시 전송하고 다시 멈췄다가 기다린다
- 전송 오류는 프레임 번호가 지정되지 않은 경우 발생할 수 있는 모호성을 반영
- 모호성 해결을 위해 프레임이 수신되었는지 확인할 수 있는 시퀀스 번호를 제공해야 함
### 1-Bit Sequence Numbering Suffices
- 프레임 헤더에서는 한정된 수의 비트만 가변적이므로 시퀀스 번호는 간결해야 함
- 실제로 Stop and Wait ARQ에서는 1비트 시퀀스 넘버링으로도 충분함
- 한 쌍의 1비트 정보, 프레임 시퀀스 번호 및 1비트 승인 시퀀스 번호를 사용하면 네가지 글로벌 상태가 가능함
- 재전송이 필요한 경우에 대비하여 송신기는 전송 중인 프레임의 시퀀스 번호, 관련 타이머 및 프레임 자체를 추적해야 함
- 수신기는 수신할 것으로 예상되는 다음 프레임의 시퀀스 번호만 추적
### Transmitter & Receiver
- 송신기가 시퀀스 번호를 0으로 설정하고 시퀀스 번호를 수신할 준비가 된 상태에서 시작함
- 송신기는 준비 상태이거나 대기 상태일 수 있음
- 수신기는 항상 준비 상태
***
### 요약
- Stop and Wait ARQ는 IBM 바이너리 동기 통신 프로토콜, 문자 지향 데이터 링크 제어 및 Xmodem 파일 전송 프로토콜에 사용됨
***
# 4. S&W 성능 및 Go-Back-N ARQ
***
### Stop-and-Wait Performance
- Stop and Wait ARQ는 전파 지연이 낮은 채널에서는 잘 작동하지만 전파 지연이 클 때, 특히 프레임 전송 시간보다 훨씬 긴 경우에는 비효율적
- 전송 속도가 초당 1메가비트인 채널을 통해 1000비트 길이의 프레임을 전송한다고 가정
- 프레임 전송 시간은 1밀리초
- 전송 시작부터 확인 수신까지 걸린 시간이 40밀리초라고 가정
- 이 채널을 통해 전송할 수 있는 비트 수 (40밀리초) 는 40000 비트
- Stop-and-Wait ARQ는 이 기간 동안 1000비트만 전송 가능
- 효율성은 2.5%에 불과
- 송신기가 승인을 기다리는 동안 채널은 대부분 유휴 상태이기 때문
### Stop-and-Wait Delay Model
- ppt 그림 참조
### S&W Efficiency on Error-free channel
- 오류가 없는 경우 프로토콜의 유효 정보 전송 속도는 정보 비트를 전달하는 데 필요한 총 시간 동안 목적지로 전달되는 정보 비트 수의 비율
- 전송 속도는 전송 대역폭이라고도 함
- 전송 효율은 전송 속도에 대한 유효 전송 속도의 비율
- 분자에서 프레임 오버헤드로 인해 전송 효율이 저하됨
- 분모에서 승인 프레임으로 인한 손실, 지연 대역폭의 곱 존재
### Delay-Bandwidth Product
- 지연 대역폭 제품은 네트워크 프로토콜 성능 분석에서 매우 중요한 개념
- 지연은 실제로 프레임 전송 및 승인 동안의 총 대기 시간, 두 번의 전파지연과 두 번의 전파시간
- 총 대기 시간을 왕복 시간 or RTT라고 함
- 예제를 통한 Delay-Bandwidth Product의 영향 ppt 참고
- **지연 대역폭 곱이 높을수록 Stop and Wait 프로토콜의 효율성이 낮아짐**을 확인
- 지연 대역폭 제품은 실제로 대기 시간으로 인한 전송 용량 낭비이기 때문에
- Stop and Wait 프로토콜은 초고속 네트워크나 매우 긴 전파 지연에 적합하지 않다
- 프레임을 다시 전송해야 하는 전송 오류가 발생할 수 있음
### S&W Efficiency in Channel with Errors
- 프레임에 확률 Pf가 있고, 1-Pf는 프레임이 오류 없이 도착할 확률이라고 가정
- ppt 수식 참고
- Impact Bit Error Rate
  - 전송 오류가 더 발생할 경우 네트워크 효율성이 크게 영향을 받는다
***
### Go-Back-N ARQ
- 송신기가 충분한 프레임을 계속 전송하여 송신기가 승인을 기다리는 동안 채널을 계속 바쁘게 유지함으로써 Stop-and-Wait 비효율성을 극복 가능
- 이전 프레임 전송이 완료되기 전에 새 프레임의 전송이 시작되는 절차를 파이프라이닝이라고 함
- Go-Back-N ARQ는 프레임 전송을 파이프라인하여 채널을 계속 바쁘게 만든다
- 전송 중에 바쁘게 유지하기 위해 최대 수의 미해결 프레임 수를 허용함
- 수신기 윈도우는 보통 1개
- 채널을 계속 사용할 수 있으려면 이 창의 크기가 지연 대역폭 제품보다 커야 함
- 윈도우가 모두 사용되기 전에 가장 오래된 프레임에 대한 승인이 도착하면 프레임을 계속 전송할 수 있음
- 용량이 다 소모된 것으로 확인되면 되돌아가서 모든 미해결 프레임을 다시 전송
- ex) go-back-4 케이스 ppt 참고
***
### 요약
- 지연 대역폭 제품은 네트워크 프로토콜 성능 평가의 핵심 요소
- Stop and Wait ARQ 성능에 상당한 영향
***
# 5. Go-Back-N and Selective Repeat ARQ
***
- 선택적 반복 ARQ 프로토콜
- 통신 오류가 발생하면 Go-Back-N 프로토콜은 최대 N개의 미해결 프레임을 재전송해야 할 수 있음
- 더 나쁜 것은 프레임이 손실되고 송신기에 전송할 프레임이 없는 경우
- 윈도우가 소진되지 않고 복구가 시작되지 않는다는 것
- 해결방법으로 각 프레임마다 타임아웃을 사용하는 방법
  - 제한 시간이 만료되면 미해결 프레임을 모두 다시 보내는 것
### Maximum Window Size
- Go-Back-N 프로토콜의 최대 윈도우 크기 문제
- 뛰어난 성능을 발휘할 수 있는 최대 프레임 수는 몇 개일까?
### Applications of Go-Back-N ARQ
- 비트 지향 데이터 링크 제어 프로토콜인 HDLC와 V.42 모뎀을 사용함
### Piggybacking and Bidirectional Links
- 양방향 전송에서는 데이터 프레임과 ACK 프레임이 interleaving하는 이래로, 데이터 전달에 대한 무료 승인 기능을 제공하는 것은 어떤가?
- 수신기는 다음 출발 프레임에 확인 메시지를 삽입할 수 있음 <- Piggybacking, 대부분의 컨트롤 프레임을 제거할 수 있음
- 통신은 양방향으로 진행
- 피기백킹을 사용하면 대역폭 사용이 크게 향상됨
- 중요한 문제는 패킷이 승인 메시지로 피기백될 때까지 얼마나 기다려야 하는가 << 타임아웃보다 짧아야 함
- 피기백킹의 경우 타임아웃에는 최소 두 번의 전파 시간과 두 번의 전송 시간, 한 번의 처리 시간이 포함되어야 함
- 슬라이드 인 윈도우 크기는 타임아웃 기간 동안 채널을 계속 사용할 수 있을 만큼 커야 함
***
### Selective Repeat ARQ
- 더 효율적인 ARQ 프로토콜
- 전송은 제쳐두고 오류가 발생하거나 손실된 개별 프레임만 재전송함
- 활성 확인 메시지가 도입되어 승인되지 않은 가장 오래된 프레임이 다시 전송됨
- 수신기 버퍼가 늘어나고 받아들일 수 있는 시퀀스 번호가 표시된 수신기 창이 나타남
- 순서가 맞지 않지만 프레임은 정확함
### Applications of Sel. Repeat ARQ
- 선택적 반복 ARQ의 적용에는 안정적인 스트림 서비스를 위한 TCP가 포함됨
- 효율성 비교 수식 ppt 참고
- 전송 오류 확률이 0에 가까울 때, 선택적 반복과 Go-Back-N 둘 모두 거의 최적
- 전송 오류 확률이 100% 에 가까워지면 Go-Back-N과 Stop-and-Wait는 완전히 동일