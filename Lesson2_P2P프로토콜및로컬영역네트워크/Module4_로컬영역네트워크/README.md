# 1. LAN (근거리 통신망)
***
### LAN에서 충돌 감지와 함께 CSMA를 적용하는 방법을 살펴봄
### LAN이란?
- 로컬 영역이란 사적인 영역을 의미
- 일반적으로 1km 미만의 컴퓨터 간 거리가 짧음
  - 저렴
  - 고속, 비교적 오류 없는 통신 가능
  - 복잡한 오류 제어가 필요없음
- LAN에서 컴퓨터가 계속 이동하고 각 시스템이 고유한 MAC 주소를 제공함
- **_근거리 통신망 내에서 라우팅은 모든 메시지를 LAN의 모든 시스템에 브로드캐스팅하는 것_**
- 그러므로 중간 수준의 액세스 제어 프로토콜이 필요함
### Typical LAN Structure
- 컴퓨터와 네트워크 장치는 NIC(네트워크 인터페이스 카드)를 통해 케이블 시스템에 연결됨
- NIC는 네트워크에 있는 컴퓨터 간의 정보 전송을 조정함
### Medium Access Control Sublayer
- IEEE 802.1 에서, 데이터 링크 계층이 2개의 하위 레이어로 구분됨
1. Medium Access Control Sublayer (MAC)
2. Logical Link Control Sublayer (LLC)
### MAC Sublayer
- IEEE는 IEEE 802.3 이더넷 및 IEEE 802.5 토큰 링을 비롯한 여러 MAC 표준을 정의함
- 각 MAC 표준에는 해당 표준이 작동할 수 있는 관련 물리 계층 집합이 있음
### Logical Link Control Layer
- MAC 서브레이어는 데이터그램을 연결 없이 전송할 수 있도록 함
- MAC 프로토콜에는 일반적으로 오류 제어 절차가 포함되어 있지 않음
- LLC 서브레이어는 안정적인 프레임 서비스를 위해 MAC 서브레이어가 제공하는 서비스를 개선
### LLC Services
- LLC 하위 계층은 MAC의 데이터그램 서비스를 기반으로 구축
1. Unacknowledged connectionless service
2. Reliable connection-oriented service
3. Acknowledged connectionless service
### Encapsulation of MAC frames
- LLC 프로토콜 데이터 유닛은 MAC 프레임으로 캡슐화됨
- MAC 레이어는 헤더와 트레일러를 모두 추가함
- TCP와 IP의 헤더 오버헤드가 누적되면서 최소 20바이트의 헤더가 추가됨에 유의
- LLC는 3~4바이트를 추가하고 MAC 서브레이어는 헤더와 트레일러를 추가함
### IEEE 802.3 MAC : Ethernet
- 최초의 IEEE 802.3 표준은 근거리 통신망이 아닌 동축 케이블을 위해 정의됨
- 근거리 통신망에서는 충돌 감지 기능이 있는 CSMA를 사용하여 버스 매체를 통해 터미널 전송을 브로드캐스트함
- CSMA의 중요한 시스템 매개변수는 충돌 감지였으며, 스테이션의 채널을 장악하는 데 필요한 경합 해결의 기반을 형성하는 미니 슬롯임
- 최소 두 개의 파티션 딜레이 정도
- IEEE 표준에서는 충돌의 재전송 시도 일정을 조정할 때, Truncated binary exponential backoff 알고리즘을 사용하도록 명시함
- 프레임이 n번째 재전송을 시도하려는 경우, 재전송 시간은 0에서 2^k - 1 값 범위에서 동일한 확률의 정수를 선택하여 결정 (k는 n과 10 중 최소값)
- 재전송은 최대 16회까지 시도, 그 이후에는 시스템 중단
### IEEE 802.3 Original Parameters
- 또 다른 주요 파라미터는 최소 프레임 크기
- 충돌 감지의 경우 노이즈 버스트가 송신기로 되돌아올 때 전송이 진행 중인 필드를 보내려면 모든 프레임에 잘못된 전파 칩이 두 개 이상 있어야 함
- 이더넷의 최대 길이는 약 2500m, 리피터는 4개
- 시작 전파 지연은 약 50 마이크로초 -> 512 bits / 10 Mbps
- 최소 프레임 크긴는 64바이트 즉 512로 정의됨
- 대역폭이 10배 늘어나는 것을 수용하려면 거리가 10배 감소하거나, 최소 프레임 크기가 10배 증가해야 함
### IEEE 802.3 MAC Frame
- 각 프레임 전송은 처음부터 시작
- Preamble은 수신기가 클럭을 송신기 클록과 동기화하는데 도움이 됨
- Destination address
- Source address
- Length
- Information
- Pad
- FCS
- 서비스 데이터 단위가 64바이트보다 작은 경우 **패딩** 사용
- 정보 필드의 최대 프레임 길이 제한은 1500 바이트
### Ethernet Scalability
- 충돌 감지 최대 처리량이 포함된 CSMA는 정규화된 지연-대역폭 곱 알파 에 따라 달라짐
- 프레임 전송 시간 동안의 전파 지연 비율
- 알파를 일정하게 유지하려면 전파 지연을 줄이거나 프레임 길이 크기를 늘려야 함
### Fast Ethernet
- 고속 이더넷은 초당 100 메가비트로 작동
- 초당 10메가비트의 이더넷과의 호환성을 유지하기 위해 프레임 형식, 인터페이스 및 절차가 동일하게 유지됨
- 기가비트 이더넷에서는 최소 프레임 크기가 512바이트로 늘어남
- 프레임 구조는 보존
***
# 2. 무선 LAN : CSMA-CA
***
- 이동성과 로밍을 통해 어디에서든 액세스 가능
- 무선 기술에는 상당한 어려움 - 간섭의 영향을 받기 쉬우며 신뢰성에 문제
- 페이딩 효과로 인해 신호 강도는 공간과 시간에 따라 달라짐
- 커버리지가 일관되지 않고 예측불가
- 무선 신호는 특정 영역에 쉽게 포함될 수 없음 - 도청자가 신호를 가로챌 수 있다
### Hidden Terminal Problem
- CSMA를 무선 이더넷에 사용가능?
- 두 스테이션 A와 C가 사이에 위치한 스테이션 B 로 전송을 시도할 때 발생하는 히든 스테이션 문제
- 두 스테이션 A와 C는 서로 충분히 떨어져 있어 서로의 송신을 들을 수 없을 정도로 떨어져 있음
- 따라서 채널을 감지하면 다른 스테이션이 실제로 전송 중이라도 채널을 유휴 상태로 감지할 수도 있음
- 이 경우 선행 두 스테이션의 전송이 중간 스테이션인 B에서 충돌하게 됨
### CSMA-CA
- 캐리어 다중 액세스는 이러한 유형의 충돌을 방지하기 위해 개발됨
- 스테이션 A가 스테이션 B로 데이터 프레임을 보내려는 경우, A가 먼저 RTS 프레임을 전송하라는 요청을 보낸다
- 스테이션 B가 데이터를 수신하면, B는 CTS 프레임 전송 허가를 내림
- B 범위 내의 모든 스테이션은 CTS 프레임을 수신하므로 A에게 전송 권한이 부여되었음을 인식함
- 따라서 스테이션 A가 데이터 프레임 전송을 진행하는 동안에는 조용하게 유지됨
- 데이터 프레임이 오류와 함께 도착하면, B는 승인 메시지로 응답함
- 두 스테이션이 동시에 RTS 프레임을 전송하는 것은 여전히 가능하므로 이 경우, 스테이션은 백오프를 실행하여 나중에 시도할 때 스케쥴을 지정해야 함
### Ad Hoc Communications
- 기본 서비스인 BSS (The basic service set) 는 IEEE 802.11 아키텍쳐의 기본 구성 요소
- 서로의 범위 내에 있는 스테이션 그룹이 통신 매체에 대한 액세스를 조정하는 것으로 정의됨
- BSS가 적용되는 지리적 영역을 기본 서비스 지역 BSA (The basic service area)라 함
- 단일 BSS를 사용하여 임시 네트워크를 구성 가능
### Infrastructure Network
- 분산 시스템을 통해 BSS 세트를 상호 연결하여 확장 서비스를 구성가능
- 각 BSS에는 스테이션 기능을 갖춘 인터넷 액세스 포인트가 있음
- 인프라 네트워크는 비공식적으로 BSS, Distribution System, 액세스 포인트의 조합을 지칭하는데 사용됨
### IEEE 802.11 무선랜
- unlicensed 스펙트럼의 가용성에 영향을 받음
- BSS와 확장 서비스 세트인 ESS
- BSS 내의 스테이션은 서로 직접 통신 가능
### Distribution Service
- 확장된 서비스 세트의 액세스 포인트 간 MAC 계층 서비스 데이터 유닛 전송이 포함됨
- 확장 서비스 세트에 있는 포털과 BSS 간의 MAC 계층 서비스 데이터 단위 전송 및 동일한 BSS의 스테이션 간 MAC 계층 서비스 데이터 단위 전송
### Infrastructure Services
- 액세스 포인트를 선택하고 액세스 포인트와의 연결을 설정함
- 스테이션의 ID를 확인하는 인증 서비스와 콘텐츠르 비밀로 유지하기 위한 개인 정보 보호 서비스를 제공함
### Frame Types
- IEEE 802.11은 3가지 종류의 프레임을 지원함
  - 관리 프레임
    - 액세스 포인트와의 스테이션 연결 및 연결 해제
    - 타이밍, 동기화
    - 인증 및 인증 해제
  - 제어 프레임
    - 데이터 전송 중 핸드쉐이킹 및 확인에 사용됨
  - 데이터 프레임
### Frame Structure
- MAC 헤더, 프레임 본문 및 CRC 체크섬으로 구성됨
### 요약
- ppt 표를 통해 IEEE 802.11 물리 계층 옵션 확인가능
***
# 3. 무선 LAN : MAC
***
### IEEE 802.11 MAC
- MAC 하위 계층은 채널 액세스 절차, 프로토콜 데이터 단위 주소 지정, 프레임 형식 지정, 오류 제어, 서비스 데이터 단위의 조각화 및 재조립을 담당함
- 하위 계층은 인증 및 개인 정보 보호 매커니즘을 통해 보안 서비스를 지원하는 옵션 제공
- MAC 관리 서비스는 확장된 서비스 세트 내에서 로밍을 지원하고 스테이션의 전력 관리를 지원
### MAC Services
- IEEE 802.11 MAC 프로토콜은 BSS의 스테이션이 전송할 수 있는 시기와 무선 매체를 통해 프로토콜 데이터 단위를 수신할 수 있는 시기를 결정하는 조정 기능 측면에서 지정
- Distribution coordination funcion과 Point coordination function 2가지 조정 기능 정의
- 비동기 데이터 전송을 지원하는 모든 스테이션에는 분산 조정 기능이 필요
- 이 기능은 전송 매체가 경합 모드에서만 작동하므로 전송된 각 패킷에 대해 모든 스테이션이 채널을 놓고 경합해야 함
- 포인트 조정 기능은 선택사항이며, 액세스 포인트는 서비스 데이터 유닛의 시간 제한 전송을 지원하기 위해 액세스 포인트에서 구현가능
- 경합 기간과 충돌 없는 기간을 번갈아 사용가능
- 경합 없는 기간에는 액세스 포인트에서 미디어 사용을 제어함
- 스테이션이 채널 액세스를 놓고 경쟁할 필요가 없음
### Distributed Coordination Function (DCF)
- 분산 조정 기능은 CSMA-CA (충돌 회피) 프로토콜을 사용한 캐리어 센스 다중 액세스를 기반으로 함
- 전송이 완료된 후 모든 스테이션은 프레임 간 공간 IFS라고 하는 일정 최소 시간 동안 정숙을 유지해야 함
### Priorities through Interframe Spacing
- 프레임 간 공간의 길이는 스테이션이 전송하려는 프렝미 유형에 따라 달라짐
- 우선 순위가 높은 프레임은 채널을 놓고 경합하기 전에 짧은 IFS 기간만 기다려야 함
- 간단히 말해서 IFS로 사용되는 프레임 유형에는 승인(ACKs), CTS(Clear-to-Send), 분할된 서비스 데이터 단위의 데이터 프레임 등이 포함됨
- 조정 지점 함수 프레임 간 공간 (PIFS)은 중간 기간이며, 조정 지점 기능을 사용하면 경합이 없는 기간이 시작될 때 미디어에 대한 양질의 액세스 권한을 얻을 수 있음
- 분산 조정 기능은 DCF 프레임 간 공간 (DIFS) 을 사용하여 데이터를 전송함
### Contention & Backoff Behavior
- DIFS 기간 이후에도 채널이 여전히 유휴 상태인 경우, 레디 스테이션은 초기 프로토콜 데이터 유닛을 전송할 수 있음
- DIFS 이전에 채널이 사용량이 많아지면 스테이션은 재시도를 위한 백오프 시간을 예약해야 함
- 프레임 전송을 완료한 스테이션은 즉시 전송할 수 없음
### Carrier Sensing in 802.11
- IEEE 802.11에서는 물리적 반송파 감지라고 하는 무선 인터페이스 및 가상 반송파 감지라고 하는 MAC 하위계층에서 수행
- 두 감지 중 하나가 사용 중이면 채널이 사용중인 것
- 소스 스테이션은 가상 캐리어 감지를 사용하여 기본 서비스 세트의 다른 모든 스테이션에 알림
- 프로토콜 데이터 유닛을 성공적으로 전송하기 위해 채널을 얼마나 오래 사용할 수 있는가?
- 소스 스테이션은 데이터 프레임의 MAC 헤더에 지속 시간 필드로 설정됨
- 요청 전송에서 제어 프레임을 전송할 수도 있음
- 모든 스테이션은 네트워크 할당 벡터를 조정하여 채널이 유휴 상태가 되는 시기를 나타냄
### Transmission of MPDU without RTS/CTS
- 실제로 스테이션은 RTS와 CTS를 사용하지 않도록 선택할 수 있음
- 특히 사이트의 데이터가 작고 통신 미디어의 부하가 적은 경우에는 더욱 그렇다
- 데이터그램의 성공적인 전송을 보여주는 다이어그램 ppt 참고
- 데이터 프레임이 전송되면 프레임의 지속 시간 필드를 통해 기본 서비스 세트의 모든 스테이션이 미디어 구축 기간을 알 수 있음
- 데이터 프레임의 모든 스테이션은 지속 시간 값 필드를 기반으로 네트워크 할당 벡터를 조정함
- 지속 시간 필드에는 샷 IFS와 데이터 프레임 이후의 승인 메시지가 포함됨
- 스테이션은 서비스 데이터 단위가 RTS 임계값을 초과할 때마다 RTS와 CTS를 사용하도록 선택할 수 있음
- 항상 RTS와 CTS를 사용할 수도 있음
- RTS 및 CTS 프레임 전송의 오버헤드로 인해 추가 지연이 발생할 수도 있음
- 채널은 오류율이 비교적 크기 때문에 매우 긴 전송을 처리할 수 없지만, 표면 데이터 단위가 크면 단위가 분할되어 전송 신뢰성이 높아질 수 있음
### Collisions, Losses & Errors
- CSMA-CA의 충돌 회피 부분은 랜덤 백오프 절차를 통해 수행됨
### Point Coordination Funcion
- 조정 지점 기능은 연결 지향 충돌 없는 서비스를 제공하는데 사용할 수 있는 선택적 기능이지만
- 인접 포팅 스테이션에서는 채널 경합 없이 전송할 수 있음
- PCF 기능은 액세스 포인트의 포인트 코디네이터가 수행함
### 요약
- 분산 조정 기능 DCF가 필요함
- 지점 조정 기능 PCF는 선택적