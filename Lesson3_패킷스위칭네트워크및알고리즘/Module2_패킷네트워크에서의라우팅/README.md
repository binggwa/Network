# 1. 패킷 스위칭 : 가상 회로
***
### Packet Switching - Virtual Circuit
- 패킷 전송 전에 소스 및 목적지가 되는 가상회로 라는 고정경로를 설정하는 작업 포함
- 연결의 모든 패킷은 동일한 경로를 따른다
### Connection Setup
- 가상 회로 설정 절차는 먼저 네트워크를 통한 경로를 결정한 다음 연결 요청과 연결 확인 메시지를 교환하여 스위치에서 경계를 설정함
- 경로를 따라 있는 모든 라우터는 가상 회로를 설정하기 위한 단일 메시지 교환에 관여함
- 일반적으로 각 연결은 가상 회로 식별자인 VCI(Virtual Circuit Identifier) 라는 로컬 태그로 식별됨
- 각 라우터는 한 입력의 수신 태그를 해당 출력 포트의 발신 태그와 연결하는 방법만 알면 됨
- 테이블이 설정되면 패킷이 경로를 따라 이동할 수 있음
### Virtual Circuit Forwarding Tables
- 패킷 라우터의 각 입력 포트에는 라우팅을 위한 전달 테이블이 있음
- 테이블 조회는 패킷을 전달할 출력 포트와 다음 라우터의 입력 포트에서 사용할 VCI를 제공함
- 하드웨어로 테이블 룩업을 구현할 수 있으므로, 가상 회로 스위칭에서 매우 빠른 속도가 가능함
### Routing in Virtual Circuit Subnet
- 가상 회로망에서의 라우팅 예
### Virtual Circuit w/ Connection Setup Delay
- 가상 회로 패킷 스위칭으로 인한 전체 지연
- 연결 설정으로 인해 추가 지연이 발생함
- 가상 회로가 패킷 몇 개만 전송하기 위한 것이라면 이러한 초기 연결 setup 지연은 용납되지 않음
### Example : ATM Networks
- ATM 네트워크는 가상 회로 솔루션 패러다임을 적용하여 네트워크를 통한 정보의 데이터 전송과 관련된 연결을 제공함
- 모든 정보는 셀이라는 더 짧은 고정길이의 패킷에 매핑됨
### Cut-Through Switching
- 가상 회로 패킷 스위칭의 수정된 형태 중 하나는 컷 스루 패킷 스위칭
- 재전송이 기본 데이터 링크 제어를 사용하지 않을 때 사용가능
- 헤더에만 오류 검사를 적용하므로 헤더가 수신되고 처리되는 즉시 패킷을 전달가능
- 지연 시간을 줄일 수 있음
### Message vs. Packet Minimum Delay
- 메시지, 저장후전달 패킷, 컷 스루 패킷 스위칭간의 지연 비교
- 컷스루가 훨씬 빠름
### 요약
- 데이터그램 패킷 스위칭과 가상 회로 스위칭의 한가지 주요 차이점은 주소 지정
- 가상 회로 스위칭에서 주소 지정을 위해 헤더에 필요한 비트 수는 입력 포트를 통한 동시 가상 회로의 최대 수를 나타내는 데 필요한 비트 수로 줄어듬
- 훨씬 작은 숫자임
- 전체 소스 및 대상 주소의 수가 필요한데, 이는 데이터그램 패킷 스위칭에 비해 가상 회로 스위칭의 장점 중 하나임
- 가상 스위칭의 또 다른 장점은 코어 설정 중에 리소스를 할당할 수 있어 서비스 품질을 보장하는 데 도움이 되지만
- 가상 회로 스위칭에는 데이터그램 접근 방식에 비해 단점이 있음
- 네트워크에 있는 라우터는 라우터를 통과하는 흐름에 대한 정보를 유지하지 않음
- 흐름 수에 따라 상태 정보의 양이 매우 빠르게 증가함
- 라우터 고장의 영향도 단점
- 가상 서비스 스위칭의 경우 네트워크에 장애가 발생하면 영향을 받는 모든 연결을 재설정해야 함
***
# 2. 패킷 네트워크에서의 라우팅
***
### Routing in Packet Networks
- 특정 노드간의 자유 경로에서 가장 best인 경로는 어디인가?
- 최소 딜레이, 최소 홉, 최대 대역폭, 최소 비용?
### Routing Algorithm Requirements
- 노드는 실제 라우터
- 일반적으로 라우팅 알고리즘은 패킷의 신속하고 종합적인 전달
- 변화에 대한 적응성, 견고성, 낮은 오버헤드와 같은 목표를 추구해야 함
### Creating the Routing Tables
- 라우팅 알고리즘이 세트 또는 경로를 결정하면 경로 정보가 라우팅 테이블에 저장됨
- 각 라우터가 패키지 전달 방법을 알 수 있도록 하기 위해서
- 저장되는 특정 경로 정본느 패킷 스위칭 유형에 따라 다름
- 일반적으로 라우팅 테이블을 만드려면 링크 상태에 대한 정보가 필요하고 링크 상태 정보를 배포하고 그를 기반으로 최적의 경로를 계산해야 함
### Routing Tables in Datagram Networks
- 각 테이블에는 목적지에 대한 엔트리가 들어있음
- 각 엔트리는 연결된 대상이 있는 패킷이 가져갈 다음 홉을 지정함
- 패킷이 도착하면 테이블 조회를 통해 터미널을 라우팅함
- 문제는 대상 수가 매우 많아지면 라우팅 테이블의 크기가 실제 구현 제한을 초과할 수 있다는 것
### Example : Internet Routing
- 인터넷 프로토콜, IP는 네트워크 간 데이터그램 패킷 스위칭을 사용함
- 각 호스트에는 네트워크 주소와 호스트 주소라는 두 부분으로 구성된 IP주소가 있음
- 라우터는 네트워크 주소만을 기반으로 테이블 조회를 수행하므로 라우팅 테이블 크기가 크게 줄어듬
- 네트워크 주솔르 할당하여 집계할 수 있으므로 라우팅 테이블 크기를 더 줄일 수 있음
### Routing in Virtual-Circuit Packet Networks
- 가상 회로에서 패킷 스위치 네트워크 경로는 연결 설정 중에 결정됨
- 가상 연결 식별자인 VCI는 라우터에 로컬이며, 각 링크의 식별자는 지정된 링크의 변수 VCI에 따라 레이블 전환을 통해 다른 식별자로 변환될 수 있음
### Non-Hierarchical Addresses and Routing
- 주소할당에 계층적 접근 방식을 사용하면 로드와 케이블의 크기를 줄일 수 있음
- 주소가 비계층적 주소인 경우 주소와 라우팅 근접성 사이에는 관계가 없음
- 따라서 라우터의 라우팅 테이블은 16 엔트리를 유지해야 함
### Hierarchical Addresses and Routing
- 접두사가 어디에 호스트가 붙는 네트워크를 나타냄
- 라우팅 테이블은 4 엔트리를 요구함
- 기본적으로 가까이 있는 호스트에는 공통 접두사가 있는 주소가 붙어야 함
- 이런 방식으로 패키지 라우팅 방식을 결정하기 위해 주소의 일부인 접두사만 검사하면 됨
### Specialized Routing
- Flooding
- Deflection Routing
### Flooding
- 플러딩은 네트워크를 연구하고 모든 노드에 정보를 전파하는 데 매우 유용함
- 원칙상 패킷을 수신하지 않은 패킷을 제외한 모든 포트로 들어오는 패킷을 전달하는 패킷 스위치가 필요함
- 플러딩은 라우팅 테이블의 정보를 사용할 수 없는 경우(ex) 시스템 설정 중)에 효과적인 라우팅 접근 방식임
- 문제는 하나의 패킷이 여러 패킷을 생성하기 때문에 플러딩으로 인해 네트워크가 쉽게 스왑될 수 있다는 것
- 기하급수적으로 증가하는 속도로 패킷을 생성함
### Limited Flooding
- 플러딩으로 인한 리소스 소비를 줄이기 위한 간단한 방법 중 하나로 홉 수를 제한하는 Time-to-Live 필드를 각 패킷에 사용하는 것
- 각 라우터는 포켓이 가득 차기 전에 사용 시간을 1씩 줄임
- 값이 0에 도달하면 라우터는 패킷을 버린다
- 각 라우터의 또 다른 접근 방식은 플러딩 전의 식별자
- 라우터와 동일한 식별자가 포함된 패킷은 삭제
- 쉽게 구현할 수 있도록 시퀀스 번호를 사용가능
### Deflection Routing
- 디플렉션 라우팅을 사용하려면 네트워크가 각 소스 및 대상 쌍에 대해 다중 패스를 제공해야 함
- 노드에 버퍼가 없을 수 있다는 것이 장점
- 패킷이 특정 포트를 사용할 수 있을 때까지 기다릴 필요가 없기 때문
- 선호 포트를 사용할 수 없는 경우 패킷은 다른 포트로 디플렉션될 수 있으며, 이 포트는 결국 목적지로 가는 경로를 찾게됨
### Manhattan Street Network
- 디플렉션 라우팅은 보통 일반 토폴로지에서 잘 작동함
- 일반 토폴로지의 예로 맨해튼 스트리트 네트워크가 있다
### 요약
- 3가지 핵심사항
- 라우팅 알고리즘 최적성은 네트워크 운영자가 최적화하려는 목적 함수에 따라 달라짐
- 계층적 주소 지정은 라우팅 테이블의 크기를 줄임
- 플러딩은 라우팅 테이블을 사용할 수 없을 때 매우 유용함
***
# 3. 최단 경로 라우팅 - 거리 벡터
***
### Shortest Paths & Routing
- 대부분의 라우팅은 최단 경로 라우팅의 변형을 기반으로 함
- 데이터그램 패킷 스위치 네트워크에는 지정된 소스를 지정된 목적지로 연결할 수 있는 경로가 여러 개 있는 경우가 많음
- 일반적으로 두 라우터를 연결하는 링크에 비용이나 거리를 추가할 수 있음
- 따라서 최단 경로 라우팅은 일부 비용 기준에 따라 최단 경로를 결정하려고 함
### Routing Metrics
- 여러 메트릭을 사용하여 라우터에 연결하는 각 링크에 비용을 할당할 수 있음
- 최적화하려는 목표에 따라 가능한 지표
  - 홉 수 : 사용된 리소스의 대략적인 측정치가 포함됨
  - 지연 : 선택한 경로에 따른 지연의 합계
  - 대역폭 : 선택한 경로의 가용 용량
  - 비용 : 측정값에 비례
### Shortest Path Approaches
- 거리 벡터 기반
- 링크 상태 기반
### Distance Vector
- 거리 벡터 라우팅에서는 각 라우터가 주변 라우터와 목적지까지의 거리 목록을 교환
- 각 대상의 라우팅 테이블에는 다음 노드와 거리가 나열됨
- 인접 라우터는 테이블 항목을 교환하고 현재 가장 적합한 다음 홉을 결정함
### Shortest Path to SJ
- 라우터 Di가 라우터 i에서 목적지까지 가는 최단 경로, 라우터 j가 최단경로에 있는 인접 라우터인 경우
- 홉과 홉간의 계속적인 최단거리 계산을 다음 홉으로 보내 전체 네트워크에서 최단경로 탐색
### Bellman-Ford Algorithm
- Bellman-Ford 알고리즘은 노드 A의 각 이웃이 노드 Z까지의 최단 거리를 알고 있으면, 노드 A가 노드 Z까지의 거리를 계산하여 최단경로를 결정할 수 있다는 원칙에 기반
- ppt를 통한 예제 확인